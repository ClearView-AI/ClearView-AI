datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Batch {
  id        String    @id @default(uuid())
  kind      String
  createdAt DateTime  @default(now())
  csvFiles  CsvFile[]
}

model CsvFile {
  id          String       @id @default(uuid())
  batchId     String
  filename    String
  headersJson String // store JSON as string
  rowCount    Int
  sampleJson  String // store JSON as string
  createdAt   DateTime     @default(now())
  Batch       Batch        @relation(fields: [batchId], references: [id])
  vizMappings VizMapping[] // <â€” back-reference relation
}

model VizMapping {
  id           String   @id @default(uuid())
  csvFileId    String
  targetScreen String
  fieldMapJson String // store JSON as string
  createdAt    DateTime @default(now())
  CsvFile      CsvFile  @relation(fields: [csvFileId], references: [id])
}
